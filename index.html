<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Control Measurement for Cloud Data Migration Process</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3f37c9;
      --accent-color: #4895ef;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4cc9f0;
      --warning-color: #f8961e;
      --danger-color: #f94144;
      --border-radius: 8px;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      line-height: 1.6;
      color: var(--dark-color);
      background-color: #f5f7fa;
      padding: 0;
      margin: 0;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Header Styles */
    .logo-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }
    
    .logo-img {
      height: 70px;
      width: 70px;
      object-fit: contain;
    }
    
    .logo-title {
      font-size: 28px;
      color: var(--primary-color);
      margin: 0;
      font-weight: 700;
    }
    
    .logo-subtitle {
      font-size: 16px;
      color: #6c757d;
      margin-top: 5px;
      font-weight: 400;
    }
    
    /* Tab Navigation */
    .nav-tabs {
      display: flex;
      list-style-type: none;
      padding: 0;
      margin-bottom: 30px;
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      overflow: hidden;
    }
    
    .nav-tabs li {
      flex: 1;
      text-align: center;
    }
    
    .nav-tabs button {
      padding: 15px 20px;
      border: none;
      background-color: transparent;
      cursor: pointer;
      font-weight: 500;
      font-size: 16px;
      width: 100%;
      transition: var(--transition);
      color: #6c757d;
    }
    
    .nav-tabs button:hover {
      color: var(--primary-color);
      background-color: rgba(67, 97, 238, 0.1);
    }
    
    .nav-tabs button.active {
      color: white;
      background-color: var(--primary-color);
    }
    
    /* Tab Content */
    .tab-page {
      display: none;
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 25px;
      margin-bottom: 30px;
    }
    
    .active-tab {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Table Styles */
table thead {
  background-color: var(--primary-color);
  color: white;
}

table th {
  padding: 12px 15px;
  text-align: left;
  font-weight: 500;
  opacity: 1; /* Ensure full opacity */
  background-color: var(--primary-color); /* Solid color */
}

table thead tr:first-child th {
  background-color: var(--primary-color); /* Make sure first row is also solid */
}

table thead tr:last-child th {
  background-color: var(--primary-color); /* Make sure second row is solid */
  opacity: 1; /* Full opacity */
}
    
    /* Table Styles */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 25px;
      font-size: 14px;
    }
    
    table thead {
      background-color: var(--primary-color);
      color: white;
    }
    
    table th {
      padding: 12px 15px;
      text-align: left;
      font-weight: 500;
    }
    
    table td {
      padding: 10px 15px;
      border-bottom: 1px solid #e9ecef;
      vertical-align: middle;
    }
    
    table tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    
    table tr:hover {
      background-color: rgba(67, 97, 238, 0.05);
    }
    
    /* Form Elements */
    select {
      padding: 8px 12px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      background-color: white;
      font-family: inherit;
      font-size: 14px;
      transition: var(--transition);
      width: 70px;
    }
    
    select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    
    /* Button Styles */
    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: var(--transition);
      display: inline-block;
      margin-top: 10px;
    }
    
    button:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    
    /* Secondary Button Styles */
    .secondary-btn {
      background-color: #6c757d;
      margin-left: 10px;
    }
    
    .secondary-btn:hover {
      background-color: #5a6268;
    }
    
    .danger-btn {
      background-color: var(--danger-color);
    }
    
    .danger-btn:hover {
      background-color: #d03437;
    }
    .phase-header {
  background-color: #e9ecef !important;
  font-weight: 600 !important;
}

.phase-header td {
  padding: 10px 15px !important;
  font-size: 1.1em !important;
}
    
    /* Results Section */
    .result {
      margin-top: 30px;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: var(--border-radius);
    }
    
    .result h3 {
      color: var(--primary-color);
      margin-bottom: 15px;
      font-size: 20px;
    }
    
    .overall {
      margin-top: 20px;
      padding: 15px;
      background-color: white;
      border-radius: var(--border-radius);
      font-size: 18px;
      box-shadow: var(--box-shadow);
    }
    
    /* Status Classes */
    .minimum { color: var(--danger-color); font-weight: 500; }
    .moderate { color: var(--warning-color); font-weight: 500; }
    .maximum { color: var(--success-color); font-weight: 500; }
    
    /* Dashboard Cards */
    .card-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .card {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
    }
    
    .card h4 {
      color: var(--primary-color);
      margin-bottom: 15px;
      font-size: 18px;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .nav-tabs {
        flex-direction: column;
      }
      
      table {
        display: block;
        overflow-x: auto;
      }
      
      .logo-header {
        flex-direction: column;
        text-align: center;
      }
      
      .btn-group {
        display: flex;
        flex-direction: column;
      }
      
      .btn-group button {
        margin-left: 0;
        margin-bottom: 10px;
        width: 100%;
      }
    }
    
    /* Metric Descriptions */
    #descriptionList {
      list-style-type: none;
    }
    
    #descriptionList li {
      padding: 15px;
      margin-bottom: 10px;
      background-color: #f8f9fa;
      border-radius: var(--border-radius);
      transition: var(--transition);
    }
    
    #descriptionList li:hover {
      background-color: rgba(67, 97, 238, 0.05);
      transform: translateX(5px);
    }
    
    #descriptionList li strong {
      color: var(--primary-color);
      display: block;
      margin-bottom: 5px;
    }
    
    /* Phase headers in tables */
    .phase-header {
      background-color: #e9ecef !important;
      font-weight: 600 !important;
    }
    
    /* Tooltip styles */
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: help;
    }
    
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 200px;
      background-color: #555;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -100px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
    
    /* Button group */
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .factor-label {
      font-weight: bold;
      color: #495057;
      font-size: 0.8em;
    }
    
    .score-input {
      width: 50px !important;
      text-align: center;
    }
    
    .hint-box {
      background-color: #e9ecef;
      padding: 10px;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="logo-header">
    <img src="image.jpeg" alt="Cloud Migration Logo" class="logo-img">
    <div>
      <h1 class="logo-title">User Control Measurement for Cloud Data Migration Process</h1>
      <p class="logo-subtitle"><b>Instruction: For each metric/indicator, rate how the affecting factors (security, cost, legal, and personnel knowledge) impact on user control level</p></b>
    </div>
  </div>

  <ul class="nav-tabs">
    <li><button class="active" onclick="openTab('metrics')">Metrics Calculator</button></li>
    <li><button onclick="openTab('overall')">Overall Dashboard</button></li>
    <li><button onclick="openTab('details')">Metric Descriptions</button></li>
  </ul>

  <!-- Metrics Calculator Tab -->
  <div id="metrics" class="tab-page active-tab">
    <div class="hint-box">
      <strong>Hint:</strong> S = Security, C = Cost, L = Legal, PK = Personnel Knowledge, NA = Not Applicable = 0
    </div>
    
    <div style="overflow-x: auto;">
      <table>
        <thead>
          <tr>
            <th>Phase</th>
            <th>Metric</th>
            <th>Indicator</th>
            <th>Description</th>
            <th colspan="4">Factors</th>
            <th>Total Score</th>
            <th>Control Level</th>
          </tr>
          <tr>
            <th colspan="4"></th>
            <th>S</th>
            <th>C</th>
            <th>L</th>
            <th>PK</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody id="metricsTable"></tbody>
      </table>
    </div>
    
    <div class="btn-group">
      <button onclick="calculateControl()">Submit</button>
      <button class="secondary-btn" onclick="clearResults()">Clear Results</button>
      <button class="secondary-btn" onclick="exportReport()">Export Report</button>
    </div>
    
    <div class="result" id="output"></div>
  </div>

  <!-- Overall Dashboard Tab -->
  <div id="overall" class="tab-page">
    <h2>User Control Measurement Dashboard</h2>
    <p>Comprehensive overview of user control levels across cloud data migration phases.</p>
    
    <div class="card-container">
      <div class="card">
        <h4>Control Level Summary</h4>
        <p>Visual representation of your overall user control status will appear here after calculation.</p>
      </div>
      <div class="card">
        <h4>Phase Performance</h4>
        <p>Detailed breakdown of user control metrics by migration phase will be displayed here.</p>
      </div>
      <div class="card">
        <h4>Recommendations</h4>
        <p>Personalized optimization suggestions based on your metrics will appear here.</p>
      </div>
    </div>
  </div>

  <!-- Metric Descriptions Tab -->
  <div id="details" class="tab-page">
    <h2>Metric Descriptions</h2>
    <p>Detailed explanations of all metrics and indicators used in the user control evaluation.</p>
    <ul id="descriptionList"></ul>
  </div>
</div>

<script>
const indicators = [
  // Standards Metrics (Pre-migration, Risk Assessment, Data Preparation)
  { 
    phase: 'Pre-migration planning and analysis', 
    metric: 'Standards', 
    indicator: 'Best practice', 
    desc: 'The use of cloud procedures that are prescribed as being most effective' 
  },
  { 
    phase: 'Pre-migration planning and analysis', 
    metric: 'Standards', 
    indicator: 'Authentication', 
    desc: 'Only intended users are allowed access' 
  },
  { 
    phase: 'Pre-migration planning and analysis', 
    metric: 'Standards', 
    indicator: 'Strategy', 
    desc: 'The migration plan should match the data migration process' 
  },
  { 
    phase: 'Pre-migration planning and analysis', 
    metric: 'Standards', 
    indicator: 'Industry', 
    desc: 'Allow for seamless cloud data migration process' 
  },
  
  { 
    phase: 'Risk assessment and strategy', 
    metric: 'Standards', 
    indicator: 'Strategy', 
    desc: 'A well-defined plan for the cloud data migration' 
  },
  { 
    phase: 'Risk assessment and strategy', 
    metric: 'Standards', 
    indicator: 'Authentication', 
    desc: 'Assess probable access points and provide relevant measures' 
  },
  { 
    phase: 'Risk assessment and strategy', 
    metric: 'Standards', 
    indicator: 'Industry', 
    desc: 'Build in risk assessment industry standards in design' 
  },
  
  { 
    phase: 'Data preparation and cleansing', 
    metric: 'Standards', 
    indicator: 'Best practice', 
    desc: 'Doing data extraction from legacy database to the target accordingly' 
  },
  { 
    phase: 'Data preparation and cleansing', 
    metric: 'Standards', 
    indicator: 'Authentication', 
    desc: 'Data is confirmed to be consistent, quality, and properly formatted' 
  },
  { 
    phase: 'Data preparation and cleansing', 
    metric: 'Standards', 
    indicator: 'Industry', 
    desc: 'Technicalities involved agree with cloud companies and practitioners' 
  },
  { 
    phase: 'Data preparation and cleansing', 
    metric: 'Standards', 
    indicator: 'Strategy', 
    desc: 'Source data needs to be audited, cleansed, prepared, and validated' 
  },
  
  // Performance Metrics (Migration Execution, Post-migration)
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'QoS', 
    desc: 'Provide different priorities to different applications, users, and processes' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Reliability', 
    desc: 'The user can rely on the data migration process' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Time', 
    desc: 'Data migration from on-premise to cloud is carried within expected period' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Capacity', 
    desc: 'Utilization of workload in the cloud data migration process' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Downtime', 
    desc: 'No interference with business transactions' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Throughput', 
    desc: 'The amount of data that is transferred to cloud in a given time' 
  },
  { 
    phase: 'Migration execution', 
    metric: 'Performance', 
    indicator: 'Transfer speed', 
    desc: 'The extent of data transferred Mbps from on-premise to cloud' 
  },
  
  { 
    phase: 'Post-migration validation and optimization', 
    metric: 'Performance', 
    indicator: 'QoS', 
    desc: 'Maintaining different priorities to different applications, users, and processes' 
  },
  { 
    phase: 'Post-migration validation and optimization', 
    metric: 'Performance', 
    indicator: 'Throughput', 
    desc: 'Application response to data access' 
  },
  { 
    phase: 'Post-migration validation and optimization', 
    metric: 'Performance', 
    indicator: 'Availability', 
    desc: 'Data is available as it were before migration' 
  },
  { 
    phase: 'Post-migration validation and optimization', 
    metric: 'Performance', 
    indicator: 'Downtime', 
    desc: 'Informed about planned downtime, and scheduling it, minimizes the interference on business transactions' 
  },
  { 
    phase: 'Post-migration validation and optimization', 
    metric: 'Performance', 
    indicator: 'User experience', 
    desc: 'Smooth experience for user is crucial' 
  }
];

let currentPhase = '';

window.onload = () => {
  const tableBody = document.getElementById('metricsTable');
  const descList = document.getElementById('descriptionList');
  
  indicators.forEach((item, i) => {
    // Add phase header row if this is a new phase
    if (item.phase !== currentPhase) {
      currentPhase = item.phase;
      const phaseRow = document.createElement('tr');
      phaseRow.className = 'phase-header';
      phaseRow.innerHTML = `<td colspan="10">${currentPhase}</td>`;
      tableBody.appendChild(phaseRow);
    }
    
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${item.phase}</td>
      <td>${item.metric}</td>
      <td>${item.indicator}</td>
      <td>${item.desc}</td>
      <td><select id="security${i}" class="score-input">
        <option value="0">NA</option>
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
      </select></td>
      <td><select id="cost${i}" class="score-input">
        <option value="0">NA</option>
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
      </select></td>
      <td><select id="legal${i}" class="score-input">
        <option value="0">NA</option>
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
      </select></td>
      <td><select id="personnel${i}" class="score-input">
        <option value="0">NA</option>
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
      </select></td>
      <td id="total${i}">8</td>
      <td id="level${i}">Moderate</td>
    `;
    tableBody.appendChild(row);

    const descItem = document.createElement('li');
    descItem.innerHTML = `
      <strong>${item.indicator}</strong> 
      <span style="color: #6c757d; font-size: 0.9em;">(${item.phase} - ${item.metric})</span><br>
      ${item.desc}
    `;
    descList.appendChild(descItem);
  });
  
  // Add event listeners to update totals when scores change
  indicators.forEach((_, i) => {
    document.getElementById(`security${i}`).addEventListener('change', () => updateRowTotal(i));
    document.getElementById(`cost${i}`).addEventListener('change', () => updateRowTotal(i));
    document.getElementById(`legal${i}`).addEventListener('change', () => updateRowTotal(i));
    document.getElementById(`personnel${i}`).addEventListener('change', () => updateRowTotal(i));
  });
};

function updateRowTotal(index) {
  const security = parseInt(document.getElementById(`security${index}`).value);
  const cost = parseInt(document.getElementById(`cost${index}`).value);
  const legal = parseInt(document.getElementById(`legal${index}`).value);
  const personnel = parseInt(document.getElementById(`personnel${index}`).value);
  
  const total = security + cost + legal + personnel;
  const maxPossible = (security ? 3 : 0) + (cost ? 3 : 0) + (legal ? 3 : 0) + (personnel ? 3 : 0);
  const percentage = maxPossible > 0 ? (total / maxPossible) * 100 : 0;
  
  let level = 'Minimum';
  if (percentage > 40 && percentage <= 70) {
    level = 'Moderate';
  } else if (percentage > 70) {
    level = 'Maximum';
  }
  
  document.getElementById(`total${index}`).textContent = total;
  document.getElementById(`level${index}`).textContent = level;
  document.getElementById(`level${index}`).className = level.toLowerCase();
}

function openTab(tabId) {
  const pages = document.querySelectorAll('.tab-page');
  const buttons = document.querySelectorAll('.nav-tabs button');
  pages.forEach(p => p.classList.remove('active-tab'));
  buttons.forEach(b => b.classList.remove('active'));
  document.getElementById(tabId).classList.add('active-tab');
  event.target.classList.add('active');
}

function calculateControl() {
  let totalControlScore = 0;
  let maxPossibleScore = 0;
  
  // Define the phase order explicitly
  const phaseOrder = [
    'Pre-migration planning and analysis',
    'Risk assessment and strategy',
    'Data preparation and cleansing',
    'Migration execution',
    'Post-migration validation and optimization'
  ];
  
  // Initialize phase data in the specified order
  let phaseData = {};
  phaseOrder.forEach(phase => {
    phaseData[phase] = {
      total: 0, 
      count: 0, 
      maxPossible: 0, 
      indicators: [],
      avgScore: 0,
      level: ''
    };
  });

  <!-- In the calculateControl() function, replace the html variable initialization with: -->
let html = `
    <h3>User Control Assessment Results</h3>
    
    <div style="overflow-x: auto;">
      <table>
        <thead>
          <tr>
            <th>Phase</th>
            <th>Metric</th>
            <th>Indicator</th>
            <th colspan="4">Factors</th>
            <th>Score</th>
            <th>Phase Avg.</th>
            <th>Control Level</th>
          </tr>
          <tr>
            <th colspan="3"></th>
            <th>S</th>
            <th>C</th>
            <th>L</th>
            <th>PK</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
`;

  // Process indicators in the specified phase order
  phaseOrder.forEach(phase => {
    // Find all indicators for this phase
    const phaseIndicators = indicators.filter(ind => ind.phase === phase);
    
    // Process each indicator in this phase
    phaseIndicators.forEach((m, i) => {
      const originalIndex = indicators.findIndex(ind => 
        ind.phase === m.phase && 
        ind.metric === m.metric && 
        ind.indicator === m.indicator
      );
      
      const security = parseInt(document.getElementById(`security${originalIndex}`).value);
      const cost = parseInt(document.getElementById(`cost${originalIndex}`).value);
      const legal = parseInt(document.getElementById(`legal${originalIndex}`).value);
      const personnel = parseInt(document.getElementById(`personnel${originalIndex}`).value);
      
      const total = security + cost + legal + personnel;
      const maxPossible = (security ? 3 : 0) + (cost ? 3 : 0) + (legal ? 3 : 0) + (personnel ? 3 : 0);
      
      // Add to phase totals
      phaseData[phase].total += total;
      phaseData[phase].maxPossible += maxPossible;
      phaseData[phase].count++;
      
      // Add to overall totals
      totalControlScore += total;
      maxPossibleScore += maxPossible;
      
      // Add row to HTML
      html += `
        <tr>
          <td>${m.phase}</td>
          <td>${m.metric}</td>
          <td>${m.indicator}</td>
          <td>${security || 'NA'}</td>
          <td>${cost || 'NA'}</td>
          <td>${legal || 'NA'}</td>
          <td>${personnel || 'NA'}</td>
          <td>${total}</td>
          ${i === 0 ? 
            `<td rowspan="${phaseIndicators.length}" style="vertical-align: middle;" id="phaseAvg${phase.replace(/\s+/g, '')}"></td>
             <td rowspan="${phaseIndicators.length}" style="vertical-align: middle;" id="phaseLevel${phase.replace(/\s+/g, '')}"></td>` : 
            ''
          }
        </tr>
      `;
    });
    
    // Calculate phase average
    const phaseAvg = (phaseData[phase].total / phaseData[phase].maxPossible) * 100;
    phaseData[phase].avgScore = phaseAvg;
    phaseData[phase].level = phaseAvg <= 40 ? 'Minimum' : phaseAvg <= 70 ? 'Moderate' : 'Maximum';
    
    // Update phase average and level in HTML
    html = html.replace(`id="phaseAvg${phase.replace(/\s+/g, '')}">`, 
                    `id="phaseAvg${phase.replace(/\s+/g, '')}">${phaseAvg.toFixed(1)}%`);
    html = html.replace(`id="phaseLevel${phase.replace(/\s+/g, '')}">`, 
                    `id="phaseLevel${phase.replace(/\s+/g, '')}" class="${phaseData[phase].level.toLowerCase()}">${phaseData[phase].level}`);
  });

  html += `</tbody></table></div>`;
  
  // Add overall score
  const overall = (totalControlScore / maxPossibleScore) * 100;
  let overallLevel = overall <= 40 ? 'Minimum' : overall <= 70 ? 'Moderate' : 'Maximum';
  
 html += `
    <div class="overall">
      <strong>Overall User Control Level:</strong> ${overall.toFixed(1)}% â€” 
      <strong class="${overallLevel.toLowerCase()}">${overallLevel} Control</strong>
    </div>
    
    <h3 style="margin-top: 30px;">Phase Summary</h3>
    <div class="card-container" style="margin-top: 20px;">
`;
  // Add phase summary
 // Add phase summary cards
phaseOrder.forEach(phase => {
  html += `
    <div class="card">
      <h4>${phase}</h4>
      <div style="text-align: center; margin: 10px 0;">
        <div style="font-size: 24px; font-weight: bold; 
          color: ${phaseData[phase].avgScore <= 40 ? 'var(--danger-color)' : 
                  phaseData[phase].avgScore <= 70 ? 'var(--warning-color)' : 'var(--success-color)'}">
          ${phaseData[phase].avgScore.toFixed(1)}%
        </div>
        <div class="${phaseData[phase].level.toLowerCase()}" style="margin-top: 5px;">
          ${phaseData[phase].level} Control
        </div>
      </div>
    </div>
  `;
});

html += `</div>`;
  
  document.getElementById('output').innerHTML = html;
  
  // Update dashboard tab with visualizations
  updateDashboard(phaseData, overall);
}
function exportReport() {
  // Create a temporary element to hold our report HTML
  const reportContent = document.createElement('div');
  reportContent.innerHTML = document.getElementById('output').innerHTML;
  
  // Add title and date to the report
  const title = document.createElement('h1');
  title.textContent = 'User Control Measurement Report';
  title.style.textAlign = 'center';
  title.style.marginBottom = '20px';
  title.style.color = '#4361ee';
  
  const date = document.createElement('p');
  date.textContent = 'Report generated on: ' + new Date().toLocaleString();
  date.style.textAlign = 'center';
  date.style.marginBottom = '30px';
  date.style.color = '#6c757d';
  
  reportContent.insertBefore(date, reportContent.firstChild);
  reportContent.insertBefore(title, reportContent.firstChild);
  
  // Create a new window with the report content
  const reportWindow = window.open('', '_blank');
  reportWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>User Control Measurement Report</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #212529; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th { background-color: #4361ee; color: white; padding: 10px; text-align: left; }
        td { padding: 8px 10px; border-bottom: 1px solid #e9ecef; }
        tr:nth-child(even) { background-color: #f8f9fa; }
        .card { background-color: white; border-radius: 8px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .minimum { color: #f94144; font-weight: bold; }
        .moderate { color: #f8961e; font-weight: bold; }
        .maximum { color: #4cc9f0; font-weight: bold; }
        .overall { padding: 15px; background-color: #f8f9fa; border-radius: 8px; margin-top: 20px; }
        .hint-box { background-color: #e9ecef; padding: 10px; border-radius: 8px; margin-bottom: 20px; }
      </style>
    </head>
    <body>
      ${reportContent.innerHTML}
    </body>
    </html>
  `);
  
  reportWindow.document.close();
  
  // Give the browser a moment to render the content before printing
  setTimeout(() => {
    reportWindow.print();
  }, 500);
}

function updateDashboard(phaseData, overall) {
  const dashboardTab = document.getElementById('overall');
  
  let dashboardHTML = `
    <h2>User Control Measurement Dashboard</h2>
    <p>Comprehensive overview of user control levels across cloud data migration phases.</p>
    
    <div class="card-container">
      <div class="card">
        <h4>Overall Control Status</h4>
        <div style="text-align: center; margin: 20px 0;">
          <div style="width: 150px; height: 150px; margin: 0 auto; border-radius: 50%; 
            background: conic-gradient(
              ${overall <= 40 ? '#f94144' : overall <= 70 ? '#f8961e' : '#4cc9f0'} 0%, 
              #e9ecef ${100 - overall}% 100%
            );
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <div style="background: white; width: 80%; height: 80%; border-radius: 50%; 
              display: flex; align-items: center; justify-content: center; font-size: 24px; 
              font-weight: bold; color: ${overall <= 40 ? '#f94144' : overall <= 70 ? '#f8961e' : '#4cc9f0'};">
              ${overall.toFixed(0)}%
            </div>
          </div>
          <p style="margin-top: 15px; font-size: 18px;">
            <strong class="${overall <= 40 ? 'minimum' : overall <= 70 ? 'moderate' : 'maximum'}">
              ${overall <= 40 ? 'Minimum Control' : overall <= 70 ? 'Moderate Control' : 'Maximum Control'}
            </strong>
          </p>
        </div>
      </div>
      
      <div class="card">
        <h4>Phase Performance</h4>
        <div style="margin-top: 15px;">
  `;
  
  // Add phase bars
  for (const phase in phaseData) {
    const avg = (phaseData[phase].total / phaseData[phase].maxPossible) * 100;
    const level = avg <= 40 ? 'minimum' : avg <= 70 ? 'moderate' : 'maximum';
    
    dashboardHTML += `
      <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <span>${phase}</span>
          <span>${avg.toFixed(1)}%</span>
        </div>
        <div style="height: 10px; background: #e9ecef; border-radius: 5px; overflow: hidden;">
          <div style="height: 100%; width: ${avg}%; 
            background: ${avg <= 40 ? 'var(--danger-color)' : avg <= 70 ? 'var(--warning-color)' : 'var(--success-color)'}; 
            border-radius: 5px;"></div>
        </div>
      </div>
    `;
  }
  
  dashboardHTML += `
        </div>
      </div>
      
      <div class="card">
        <h4>Recommendations</h4>
        <div style="margin-top: 15px;">
          ${getRecommendations(phaseData, overall)}
        </div>
      </div>
    </div>
  `;
  
  dashboardTab.innerHTML = dashboardHTML;
}

function getRecommendations(phaseData, overall) {
  let recommendations = '';
  
  if (overall <= 40) {
    recommendations += `
      <p style="color: var(--danger-color); font-weight: 500;">
        <strong>Critical Attention Needed:</strong> User control in your migration process is currently at high risk. 
        Immediate action is recommended to address critical areas.
      </p>
    `;
  } else if (overall <= 70) {
    recommendations += `
      <p style="color: var(--warning-color); font-weight: 500;">
        <strong>Moderate Control:</strong> Your migration has acceptable user control levels but 
        could benefit from improvements in several areas.
      </p>
    `;
  } else {
    recommendations += `
      <p style="color: var(--success-color); font-weight: 500;">
        <strong>Maximum Control:</strong> User control in your migration is well-managed. Focus on 
        maintaining these standards and optimizing further.
      </p>
    `;
  }
  
  // Add specific phase recommendations
  recommendations += '<ul style="margin-top: 15px; list-style-type: none;">';
  
  for (const phase in phaseData) {
    const avg = (phaseData[phase].total / phaseData[phase].maxPossible) * 100;
    
    if (avg <= 40) {
      recommendations += `
        <li style="margin-bottom: 10px; padding-left: 15px; border-left: 3px solid var(--danger-color);">
          <strong>${phase}:</strong> Needs significant improvement in user control. Review processes and consult best practices.
        </li>
      `;
    } else if (avg <= 70) {
      recommendations += `
        <li style="margin-bottom: 10px; padding-left: 15px; border-left: 3px solid var(--warning-color);">
          <strong>${phase}:</strong> Could benefit from targeted enhancements to improve user control levels.
        </li>
      `;
    }
  }
  
  recommendations += '</ul>';
  
  return recommendations;
}
</script>

</body>
</html>

